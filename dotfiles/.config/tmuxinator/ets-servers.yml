# Launch all servers needed for working locally in ets

session_name: ets-servers
windows:
  - window_name: b2e2 Server
    layout: even-horizontal
    shell_command_before:
      - act b2e2
      - cd ~/src/b2e2
    panes:
      - python -m b2e2 runserver
      - screenfetch

  - window_name: Tourbillon Server
    layout: 3ba0,208x55,0,0{102x55,0,0[102x30,0,0,37,102x9,0,31,53,102x14,0,41,52],105x55,103,0,38}
    shell_command_before:
      - act trb
    panes:
      - celery -A tourbillon.tasks.config.app worker --loglevel=debug -B
      - celery -A tourbillon.tasks beat --max-interval '10'
      - cd ~/src/tourbillon/ui && npm run dev
      - python -m tourbillon runserver -p 5001
